---
tags:
  - 데이터베이스
  - 인덱스
---

## 클러스터 인덱스
- 인덱스의 키 값이 정렬되어 있는 상태로 저장
- 인덱스의 밸류 값이 레코드의 주소가 아닌 "진짜 데이터가" 저장 되어 있음.
- 테이블의 PK에 대해서만 적용되는 내용
- <mark style="background: #FFF3A3A6;">PK 값에 의해 레코드의 저장 위치가 변경 -> Sequential I/O 작업을 하기 때문에 변경이 되면 위치를 바꾸어야함</mark>
- 기본적으로 리프노드에 있는 페이지들이 디스크에 인덱스로 정렬되어 순차적으로 저장되어 있다.


![[Pasted image 20230924164159.png]]

- 클러스터 인덱스 페이지에 실제 데이터가 저장되어 있다.
- 다음과 같은 우선순위로 클러스터링 인덱스를 설정한다.
	1. PK가 있으면 PK를 클러스터링 인덱스로 설정
	2. Not null 옵션의 유니크 인덱스 중에서 첫번째 인덱스를 선택
	3. 자동으로 유니크한 값을 가지도록 컬럼을 내부적으로 추가한 후 , 클러스터링 인덱스로 설정

| 장점                        | 단점                                                          |
| --------------------------- | ------------------------------------------------------------- |
| PK로 처리시 작업이 매우빠름 | 클러스터링 인덱스가 클 경우 인덱스가커짐                      |
| 커버링 인덱스가능           | 세컨더리 인덱스로 검색할 때 PK로 검색해야 해서 2번 검색해야함 |
|                             | Insert 할때 저장 위치가 결정되기 때문에 느림                  |
|                             | PK를 변경할때 delete and Insert 작업이 필요하기 때문에 느림   |
|                             |                                                               |
|                             |                                                               | 

